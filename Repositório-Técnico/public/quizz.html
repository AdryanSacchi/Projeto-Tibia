<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exploração</title>
    <link rel="stylesheet" href="css/quizz.css">
</head>

<body onload="iniciar()">
    <div class="pontuacaoJust" id="pontuacaoEJogo">
        <button id="btnIniciarQuiz" onclick="iniciarJogo()">Começar a Jornada</button>

        <div id="pontuacao" class="flex-colunar" style="display: none;">
            <div id="pontuacaoDuranteJogo" class="icons-quiz">
                <img src="assets/icon/coraçãov1.png" alt="Icon Coração" class="coracao"><span
                    id="spanVidaAtual">100</span>
                <img src="assets/icon/andar-vermelho.png" alt="Icon Andar" class="andar"><span>Piso <span
                        id="spanPisoAtual">1</span></span>
            </div>
        </div>

        <div id="jogo" class="width-fit-content flex-colunar border-secondary" style="display: none;">

            <div id="infoQuestao" class="padding-8">
                <span>Piso atual: <span id="spanNumeroDaQuestaoAtual"></span> de <span id="qtdQuestoes"></span>
                    pisos.</span>
            </div>

            <div id="perguntaDaQuestaoAtual" class="padding-8">
                <span id="spanQuestaoExibida" class="text-bold"></span>
            </div>

            <div id="infoAlternativas" class="padding-8">
                <span><em>Escolha uma opção dentre as abaixo:</em></span>
            </div>

            <div id="opcoes" class="flex-colunar padding-8">
                <span>
                    <input type="radio" id="primeiraOpcao" name="option" class="radio" value="alternativaA" />
                    <label for="primeiraOpcao" class="option" id="labelOpcaoUm"></label>
                </span>
                <span>
                    <input type="radio" id="segundaOpcao" name="option" class="radio" value="alternativaB" />
                    <label for="segundaOpcao" class="option" id="labelOpcaoDois"></label>
                </span>
                <span>
                    <input type="radio" id="terceiraOpcao" name="option" class="radio" value="alternativaC" />
                    <label for="terceiraOpcao" class="option" id="labelOpcaoTres"></label>
                </span>
                <span>
                    <input type="radio" id="quartaOpcao" name="option" class="radio" value="alternativaD" />
                    <label for="quartaOpcao" class="option" id="labelOpcaoQuatro"></label>
                </span>
            </div>

            <div id="botoes" class="flex-colunar padding-8">
                <button onclick="submeter()" id="btnSubmeter">Ja me decidi!</button>
                <button onclick="proximoPiso()" id="btnProx" disabled>Avançar para o próximo andar</button>
                <button onclick="tentarNovamente()" id="btnTentarNovamente" disabled>Vou tentar mais uma vez...</button>
            </div>

        </div>
    </div>
</body>

</html>
<script>
    const QUESTOES = [
        {
            pergunta: "Você acabou de entrar em uma Masmorra...",
            alternativaA: "ir pelo caminho Fácil (hehe)",
            alternativaB: "ir pelo Caminho totalmente escuro",
            alternativaC: "ir pela ponte quebrada",
            alternativaD: "aguardar (?)",
            alternativaCorreta: "alternativaC"
        },
        {
            pergunta: "Ok, parece que subimos um andar... Você escuta um grito...",
            alternativaA: "Correr em direção ao grito",
            alternativaB: "Virar a esquerda",
            alternativaC: "Virar a direita",
            alternativaD: "Pegar a tocha que está na parede e aguardar",
            alternativaCorreta: "alternativaB"
        },
        {
            pergunta: "Parece que você sobreviveu a mais um andar, a sua frente 3 baús...",
            alternativaA: "Sim, quero abrir o baú da esquerda.",
            alternativaB: "Sim, quero abrir o baú do meio.",
            alternativaC: "Sim, quero abrir o baú da direita.",
            alternativaD: "Eu sou suficiente com meus equipamentos!",
            alternativaCorreta: "alternativaD"
        },
        {
            pergunta: "Curioso.. você está indo bem demais, é sua primeira vez aqui?",
            alternativaA: "Sim",
            alternativaB: "Não",
            alternativaC: "QUEM TA PERGUNTANDO ISSO?!!??",
            alternativaD: "(silêncio)",
            alternativaCorreta: "alternativaD"
        },
        {
            pergunta: "Agora tem 3 monstros na sua frente...",
            alternativaA: "Quero correr, chega disso!",
            alternativaB: "Vou em direção ao Sapo",
            alternativaC: "Tento enfrentar o esquilo",
            alternativaD: "Vou roubar o taco do zumbi",
            alternativaCorreta: "alternativaB"
        }
    ];

    let questaoAtual = 0;
    let vida = 100;
    let piso = 1;
    const DANO = 25;

    function iniciar() {
        document.getElementById('pontuacao').style.display = "none";
        document.getElementById('jogo').style.display = "none";
    }

    function iniciarJogo() {
        document.getElementById('pontuacao').style.display = "flex";
        document.getElementById('jogo').style.display = "flex";
        document.getElementById('btnIniciarQuiz').style.display = "none";

        document.getElementById('qtdQuestoes').innerHTML = QUESTOES.length;
        document.getElementById('spanVidaAtual').innerHTML = vida;
        document.getElementById('spanPisoAtual').innerHTML = piso;

        carregarQuestao(0);
    }

    function carregarQuestao(i) {
        questaoAtual = i;
        const q = QUESTOES[i];

        habilitarOpcoes(true);

        document.getElementById('spanNumeroDaQuestaoAtual').innerHTML = piso;
        document.getElementById('spanQuestaoExibida').innerHTML = q.pergunta;

        document.getElementById('labelOpcaoUm').innerHTML = q.alternativaA;
        document.getElementById('labelOpcaoDois').innerHTML = q.alternativaB;
        document.getElementById('labelOpcaoTres').innerHTML = q.alternativaC;
        document.getElementById('labelOpcaoQuatro').innerHTML = q.alternativaD;
    }

    function submeter() {
        const opcoes = document.getElementsByName("option");
        let selecionado = null;

        // Loop simples para achar a opção marcada
        for (let i = 0; i < opcoes.length; i++) {
            if (opcoes[i].checked) {
                selecionado = opcoes[i];
                break;
            }
        }

        if (selecionado === null) {
            alert("Escolha uma opção antes de continuar!");
            return;
        }

        document.getElementById('btnSubmeter').disabled = true;
        document.getElementById('btnProx').disabled = false;
        habilitarOpcoes(false);

        verificarResposta(selecionado.value);
    }

    function habilitarOpcoes(valor) {
        document.getElementById('primeiraOpcao').disabled = !valor;
        document.getElementById('segundaOpcao').disabled = !valor;
        document.getElementById('terceiraOpcao').disabled = !valor;
        document.getElementById('quartaOpcao').disabled = !valor;
    }

    function proximoPiso() {
        document.getElementById('btnProx').disabled = true;
        document.getElementById('btnSubmeter').disabled = false;

        limparSelecao();
        limparCores();

        piso++;
        document.getElementById('spanPisoAtual').innerHTML = piso;
        questaoAtual++;

        if (questaoAtual < QUESTOES.length) {
            carregarQuestao(questaoAtual);
        } else {
            finalizar(false);
        }
    }

    function tentarNovamente() {
        window.location.reload();
    }

    function verificarResposta(valor) {
        const q = QUESTOES[questaoAtual];
        const correta = q.alternativaCorreta;

        const inputCorreto = document.querySelector('input[value="' + correta + '"]');
        const labelCorreto = inputCorreto.labels[0];

        if (valor === correta) {
            labelCorreto.classList.add("text-success-with-bg");
        } else {
            const inputErrado = document.querySelector('input[value="' + valor + '"]');
            const labelErrado = inputErrado.labels[0];

            labelErrado.classList.add("text-danger-with-bg");
            labelCorreto.classList.add("text-success-with-bg");

            vida = vida - DANO;
            if (vida < 0) {
                vida = 0;
            }
            document.getElementById('spanVidaAtual').innerHTML = vida;
        }

        if (vida <= 0) {
            finalizar(true);
        }
    }

    function finalizar(morreu) {
        if (morreu) {
            alert("GAME OVER! Você morreu no Piso " + piso);
        } else {
            alert("Parabéns! Você completou todos os pisos!");
        }

        habilitarOpcoes(false);
        document.getElementById('btnSubmeter').disabled = true;
        document.getElementById('btnProx').disabled = true;
        document.getElementById('btnTentarNovamente').disabled = false;

        document.getElementById('jogo').classList.add("text-new-gray");
    }

    function limparCores() {
        const opcoes = document.getElementsByName("option");

        for (let i = 0; i < opcoes.length; i++) {
            const label = opcoes[i].labels[0];
            label.classList.remove("text-danger-with-bg");
            label.classList.remove("text-success-with-bg");
        }
    }

    function limparSelecao() {
        const opcoes = document.getElementsByName("option");

        for (let i = 0; i < opcoes.length; i++) {
            opcoes[i].checked = false;
        }
    }
</script>